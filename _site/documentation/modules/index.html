<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>T3 Javascript Framework - API - Modules</title>

        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

        <link rel="stylesheet" href="/pages/Box/T3/css/base.css">
        <link rel="stylesheet" href="/pages/Box/T3/css/skeleton.css">
        <link rel="stylesheet" href="/pages/Box/T3/css/layout.css">

        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/pages/Box/T3/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/pages/Box/T3/css/main.css">

    </head>


    <body>

        <header class="header">
    <div class="container">
        <div class="sixteen columns">
            <nav class="header-nav">
                <ul>
    <li class="">
        <a href="/pages/Box/T3/">overview</a>
    </li>
    <li class="current">
        <a href="/pages/Box/T3/documentation">documentation</a>
    </li>
    <li class="">
        <a href="/pages/Box/T3/tutorials">tutorials</a>
    </li>
    <li class="">
        <a href="/pages/Box/T3/download">download</a>
    </li>
    <li class="">
        <a href="/pages/Box/T3/examples">examples</a>
    </li>
</ul>
            </nav>
        </div>
    </div>
</header>
<div class="header-spacer"></div>


        <div class="content container">
            <div class="three columns">
                <div class="nav">
  <aside>
    <h4><a class="" href="/pages/Box/T3/documentation/application/">Application</a></h4>
    

<ul>

    

    <li><a href="/pages/Box/T3/documentation/application/#init">init</a></li>


    

    <li><a href="/pages/Box/T3/documentation/application/#destroy">destroy</a></li>


    

    <li><a href="/pages/Box/T3/documentation/application/#addService">addService</a></li>


    

    <li><a href="/pages/Box/T3/documentation/application/#addModule">addModule</a></li>


    

    <li><a href="/pages/Box/T3/documentation/application/#addBehavior">addBehavior</a></li>


    

    <li><a href="/pages/Box/T3/documentation/application/#getService">getService</a></li>


    

    <li><a href="/pages/Box/T3/documentation/application/#getGlobalConfig">getGlobalConfig</a></li>


    

    <li><a href="/pages/Box/T3/documentation/application/#getModuleConfig">getModuleConfig</a></li>


    

    <li><a href="/pages/Box/T3/documentation/application/#start">start</a></li>


    

    <li><a href="/pages/Box/T3/documentation/application/#startAll">startAll</a></li>


    

    <li><a href="/pages/Box/T3/documentation/application/#stop">stop</a></li>


    

    <li><a href="/pages/Box/T3/documentation/application/#stopAll">stopAll</a></li>


    

    <li><a href="/pages/Box/T3/documentation/application/#isStarted">isStarted</a></li>


    

    <li><a href="/pages/Box/T3/documentation/application/#broadcast">broadcast</a></li>


    

    <li><a href="/pages/Box/T3/documentation/application/#on">on</a></li>


    

    <li><a href="/pages/Box/T3/documentation/application/#off">off</a></li>


    

    <li><a href="/pages/Box/T3/documentation/application/#fire">fire</a></li>


</ul>
    <h4><a class="" href="/pages/Box/T3/documentation/event-target/">Event Target</a></h4>
    

<ul>

    

    <li><a href="/pages/Box/T3/documentation/event-target/#on">on</a></li>


    

    <li><a href="/pages/Box/T3/documentation/event-target/#off">off</a></li>


    

    <li><a href="/pages/Box/T3/documentation/event-target/#fire">fire</a></li>


</ul>
    <h4><a class="" href="/pages/Box/T3/documentation/context/">Context</a></h4>
    

<ul>

    

    <li><a href="/pages/Box/T3/documentation/context/#getElement">getElement</a></li>


    

    <li><a href="/pages/Box/T3/documentation/context/#getConfig">getConfig</a></li>


    

    <li><a href="/pages/Box/T3/documentation/context/#broadcast">broadcast</a></li>


    

    <li><a href="/pages/Box/T3/documentation/context/#getService">getService</a></li>


    

    <li><a href="/pages/Box/T3/documentation/context/#getGlobalConfig">getGlobalConfig</a></li>


</ul>
    <h4><a class="" href="/pages/Box/T3/documentation/services/">Services</a></h4>
    

<ul>

    

    <li><a href="/pages/Box/T3/documentation/services/#Singleton">Singleton</a></li>


    

    <li><a href="/pages/Box/T3/documentation/services/#Factory">Factory</a></li>


</ul>
    <h4><a class="current" href="/pages/Box/T3/documentation/modules/">Modules</a></h4>
    

<ul>

    

    <li><a href="/pages/Box/T3/documentation/modules/#init">init</a></li>


    

    <li><a href="/pages/Box/T3/documentation/modules/#destroy">destroy</a></li>


    

    <li><a href="/pages/Box/T3/documentation/modules/#messages">messages</a></li>


    

    <li><a href="/pages/Box/T3/documentation/modules/#event-handlers">event-handlers</a></li>


</ul>
    <h4><a class="" href="/pages/Box/T3/documentation/behaviors/">Behaviors</a></h4>
    

<ul>

    

    <li><a href="/pages/Box/T3/documentation/behaviors/#init">init</a></li>


    

    <li><a href="/pages/Box/T3/documentation/behaviors/#destroy">destroy</a></li>


    

    <li><a href="/pages/Box/T3/documentation/behaviors/#messages">messages</a></li>


    

    <li><a href="/pages/Box/T3/documentation/behaviors/#event-handlers">event-handlers</a></li>


</ul>
  </aside>
</div>
            </div>
            <div class="documentation twelve columns offset-by-one">
                <h2>Modules</h2>

<p>The following methods are optional for you to implement per module.</p>

<p>Modules are only accessible by Application which opens up the possibility of a less strict interface for the module&#39;s
definition. For example, if you have complex logic for modules, you may place the function in the public API
for unit testing. This is a completely different methodology than normal and should not be applied to services.</p>

<hr class="separator">

<div class="anchor" id="init"></div>

<h2>init</h2>

<h3>Description</h3>

<p>Initializes the module. This method is fired automatically by <a href="/pages/Box/T3/documentation/application/#start">Application.start</a></p>

<h3>Example</h3>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;mod-test-module&quot;</span> <span class="na">class=</span><span class="s">&quot;module&quot;</span> <span class="na">data-module=</span><span class="s">&quot;test-module&quot;</span><span class="nt">&gt;</span>
    ...
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>

<div class="highlight"><pre><code class="javascript"><span class="nx">Application</span><span class="p">.</span><span class="nx">addModule</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="c1">// Outputs &quot;foo&quot;</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">moduleEl</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;mod-test-module&#39;</span><span class="p">);</span>
<span class="nx">Application</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="nx">moduleEl</span><span class="p">);</span>
</code></pre></div>

<hr class="separator">

<div class="anchor" id="destroy"></div>

<h2>destroy</h2>

<h3>Description</h3>

<p>Destroys the module. This method is fired automatically by <a href="/pages/Box/T3/documentation/application/#stop">Application.stop</a></p>

<h3>Example</h3>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;mod-test-module&quot;</span> <span class="na">class=</span><span class="s">&quot;module&quot;</span> <span class="na">data-module=</span><span class="s">&quot;test-module&quot;</span><span class="nt">&gt;</span>
    ...
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>

<div class="highlight"><pre><code class="javascript"><span class="nx">Application</span><span class="p">.</span><span class="nx">addModule</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="nx">destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="c1">// Outputs &quot;bar&quot;</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">moduleEl</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;mod-test-module&#39;</span><span class="p">);</span>
<span class="nx">Application</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="nx">moduleEl</span><span class="p">);</span>
<span class="nx">Application</span><span class="p">.</span><span class="nx">stop</span><span class="p">(</span><span class="nx">moduleEl</span><span class="p">);</span>
</code></pre></div>

<hr class="separator">

<div class="anchor" id="messages"></div>

<h1>Message Handling</h1>

<p>Messages are an important piece of the application. They are the protocol in which modules can broadcast information
about itself while maintaining isolation. Modules should not care about other modules listening the message
and should not have any assumptions about what the resulting actions. Therefore, message names must be generic
and should not be an RPC call between modules. For example, &#39;updateheader&#39; message from a search module is BAD
since it indicates that it wants to update the header. Instead, if the search module broadcasted a message like
&#39;searchkeywordchanged&#39; and the header module was listening for such messages, we create a much cleaner module with less
implicit coupling.</p>

<h2>messages</h2>

<h3>Description</h3>

<p>List of messages that this module will listen for. This is used by Application to fire onmessage handlers.
You should place this at the top of the module API so it is easy to find.</p>

<h3>Example</h3>

<div class="highlight"><pre><code class="javascript"><span class="nx">Application</span><span class="p">.</span><span class="nx">addModule</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="nx">messages</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;statechanged&#39;</span><span class="p">,</span> <span class="s1">&#39;searchcomplete&#39;</span><span class="p">],</span>
        <span class="nx">onmessage</span><span class="o">:</span> <span class="p">...</span> <span class="nx">see</span> <span class="nx">below</span> <span class="p">...</span>
    <span class="p">};</span>
<span class="p">});</span>
</code></pre></div>

<hr class="separator">

<div class="anchor" id="onmessage"></div>

<h2>onmessage</h2>

<h3>Description</h3>

<p>Handles application messages.</p>

<p>This message handler function should be placed above event handlers.</p>

<h3>Usage</h3>

<table class="table table-striped">
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="required">name</td>
            <td>string</td>
            <td>The message name.</td>
        </tr>
        <tr>
            <td class="optional">data</td>
            <td>any</td>
            <td>Related data for the message.</td>
        </tr>
    </tbody>
</table>

<h3>Example</h3>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;mod-test-module&quot;</span> <span class="na">class=</span><span class="s">&quot;module&quot;</span> <span class="na">data-module=</span><span class="s">&quot;test-module&quot;</span><span class="nt">&gt;</span>
    ...
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>

<div class="highlight"><pre><code class="javascript"><span class="nx">Application</span><span class="p">.</span><span class="nx">addModule</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="nx">messages</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;statechanged&#39;</span><span class="p">,</span> <span class="s1">&#39;searchcomplete&#39;</span><span class="p">],</span>
        <span class="nx">onmessage</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>

            <span class="k">switch</span> <span class="p">(</span><span class="nx">elementType</span><span class="p">)</span> <span class="p">{</span>

                <span class="k">case</span> <span class="s1">&#39;statechanged&#39;</span><span class="o">:</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Navigating somewhere!&#39;</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>

                <span class="k">case</span> <span class="s1">&#39;searchcomplete&#39;</span><span class="o">:</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Found &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">numResults</span> <span class="o">+</span> <span class="s1">&#39; results.&#39;</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>

            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">};</span>

<span class="p">});</span>

<span class="c1">// Triggers output of &quot;Navigating somewhere!&quot;</span>
<span class="nx">Application</span><span class="p">.</span><span class="nx">broadcast</span><span class="p">(</span><span class="s1">&#39;statechanged&#39;</span><span class="p">);</span>

<span class="c1">// Triggers output of &quot;Found 100 results.&quot;</span>
<span class="nx">Application</span><span class="p">.</span><span class="nx">broadcast</span><span class="p">(</span><span class="s1">&#39;searchcomplete&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">numResults</span><span class="o">:</span> <span class="mi">100</span>
<span class="p">});</span>
</code></pre></div>

<hr class="separator">

<div class="anchor" id="event-handlers"></div>

<h1>Event Handlers</h1>

<h3>Description</h3>

<p>Handles specific DOM events that are fired within the module. These handlers follow the on<event> convention.
For example, &#39;onclick&#39; handles click events and &#39;oncontextmenu&#39; handles right click.</p>

<p>List of handled events:</p>

<ul>
<li>click</li>
<li>mouseover</li>
<li>mouseout</li>
<li>mousedown</li>
<li>mouseup</li>
<li>mouseenter</li>
<li>mouseleave</li>
<li>keydown</li>
<li>keyup</li>
<li>submit</li>
<li>change</li>
<li>contextmenu</li>
<li>dblclick</li>
</ul>

<p>Note: blur/focus events are very flaky and are not supported by Application. For special events, you should define
regular javascript event handlers in init() and remove them in destroy()</p>

<p>The handler function should delegate complex logic to other functions. As a rule of thumb, try NOT to pass
the event object around.</p>

<h3>Usage</h3>

<table class="table table-striped">
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="required">event</td>
            <td>Event</td>
            <td>A DOM-normalized event object.</td>
        </tr>
        <tr>
            <td class="required">element</td>
            <td>HTMLElement</td>
            <td>The nearest HTML element with a data-type attribute specified or null if there is none.</td>
        </tr>
        <tr>
            <td class="required">elementType</td>
            <td>string</td>
            <td>The value of data-type for the nearest element with that attribute specified or null if there is none.</td>
        </tr>
    </tbody>
</table>

<h3>Example</h3>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;mod-test-module&quot;</span> <span class="na">class=</span><span class="s">&quot;module&quot;</span> <span class="na">data-module=</span><span class="s">&quot;test-module&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">data-type=</span><span class="s">&quot;okay-btn&quot;</span><span class="nt">&gt;</span>Okay<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">data-type=</span><span class="s">&quot;cancel-btn&quot;</span><span class="nt">&gt;</span>Cancel<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>

<div class="highlight"><pre><code class="javascript"><span class="nx">Application</span><span class="p">.</span><span class="nx">addModule</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="nx">onclick</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">elementType</span><span class="p">)</span> <span class="p">{</span>

            <span class="k">switch</span> <span class="p">(</span><span class="nx">elementType</span><span class="p">)</span> <span class="p">{</span>

                <span class="k">case</span> <span class="s1">&#39;okay-btn&#39;</span><span class="o">:</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;OK!&#39;</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>

                <span class="k">case</span> <span class="s1">&#39;cancel-btn&#39;</span><span class="o">:</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;NO!&#39;</span><span class="p">);</span>
                    <span class="k">break</span><span class="p">;</span>

            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">};</span>

<span class="p">});</span>
</code></pre></div>

<h1>Behaviors</h1>

<h3>Description</h3>

<p>Behaviors work in parallel with modules. They are intended to be drop-in functionality that needs little additional
interaction with the module. For example, a tabbed UI view where the UI logic is not necessarily important to the
module.</p>

            </div>
        </div>

        <footer class="footer">
    <div class="container">
        <div class="sixteen columns">
            <p>&copy; 2014 Box.com, Inc.</p>
        </div>
    </div>
</footer>


    </body>

</html>

